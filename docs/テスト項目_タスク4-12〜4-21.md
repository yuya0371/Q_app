# テスト項目: タスク4-12〜4-21

---

## 今すぐテスト可能な項目

### 前提条件
- アプリが起動できること
- ログイン済みの状態

### UIバリデーションテスト（API不要）

| # | 画面 | テスト内容 | 手順 | 期待結果 |
|---|------|-----------|------|----------|
| 1 | ホーム | 回答入力の文字数制限 | 80文字を超える入力を試みる | 80文字で入力が止まる |
| 2 | ホーム | 空回答は投稿不可 | 回答欄を空のまま投稿ボタンを確認 | ボタンが無効化（opacity低下） |
| 3 | お題提案モーダル | 文字数制限 | 80文字を超える入力を試みる | 80文字で入力が止まる |
| 4 | お題提案モーダル | 空送信不可 | お題欄を空のまま送信ボタンを確認 | ボタンが無効化 |
| 5 | お題提案モーダル | URL禁止 | URLを含むお題を入力して送信 | 「URLを含めることはできません」アラート |
| 6 | プロフィール編集 | 表示名の文字数制限 | 50文字を超える入力を試みる | 50文字で入力が止まる |
| 7 | プロフィール編集 | 自己紹介の文字数制限 | 200文字を超える入力を試みる | 200文字で入力が止まる |
| 8 | プロフィール編集 | IDは変更不可 | アプリ内ID欄を確認 | 🔒アイコン付きで編集不可 |

### 画面遷移テスト（API不要）

| # | 起点 | 操作 | 期待結果 |
|---|------|------|----------|
| 1 | プロフィールタブ | 「プロフィールを編集」タップ | 編集画面が開く |
| 2 | プロフィール編集 | 「キャンセル」タップ | 前の画面に戻る |
| 3 | プロフィールタブ | 「フォロー中」タップ | フォロー一覧画面が開く |
| 4 | プロフィールタブ | 「フォロワー」タップ | フォロワー一覧画面が開く |
| 5 | プロフィールタブ | 「すべての回答を見る」タップ | 回答履歴画面が開く |
| 6 | プロフィールタブ | ⚙️アイコンタップ | 設定画面が開く |
| 7 | プロフィールタブ | ↗️アイコンタップ | 共有画面が開く |
| 8 | ホーム（回答済み時） | 「お題を提案する」タップ | モーダルが開く |

### 画像選択テスト

| # | テスト内容 | 手順 | 期待結果 |
|---|-----------|------|----------|
| 1 | 画像選択ダイアログ | プロフィール編集で「写真を変更」タップ | ImagePickerが開く |
| 2 | 権限リクエスト | 初回で画像選択を試みる | カメラロール許可ダイアログが表示 |

---

## バックエンドが動作していればテスト可能

### 前提条件
- バックエンドがデプロイ済み
- ユーザーがログイン済み
- **今日の質問データは不要**

### プロフィール系（タスク4-16, 4-18, 4-19）

| # | テスト内容 | 手順 | 期待結果 |
|---|-----------|------|----------|
| 1 | 自分のプロフィール表示 | プロフィールタブを開く | ユーザー情報が表示される |
| 2 | プロフィール更新 | 表示名を変更して保存 | 変更が反映される |
| 3 | 自己紹介更新 | 自己紹介を変更して保存 | 変更が反映される |
| 4 | 画像アップロード | 画像を選択 | 画像がS3にアップロードされ、プロフィールに反映 |
| 5 | 画像削除 | 「写真を削除」をタップ | 画像が削除され、イニシャル表示に戻る |
| 6 | プルリフレッシュ | 下にスワイプ | プロフィールが再取得される |

### フォロー系（タスク4-21）

| # | テスト内容 | 手順 | 期待結果 |
|---|-----------|------|----------|
| 1 | フォロー一覧表示 | フォロー中をタップ | フォロー中ユーザー一覧が表示される（空でも可） |
| 2 | フォロワー一覧表示 | フォロワーをタップ | フォロワー一覧が表示される（空でも可） |
| 3 | 空状態表示 | フォローがいない状態で一覧を開く | 「フォロー中のユーザーはいません」表示 |
| 4 | プルリフレッシュ | 下にスワイプ | 一覧が更新される |

### 回答履歴（タスク4-20）

| # | テスト内容 | 手順 | 期待結果 |
|---|-----------|------|----------|
| 1 | 履歴表示 | 「すべての回答を見る」をタップ | 過去の回答一覧が表示される |
| 2 | 空状態表示 | 回答がない状態で履歴を開く | 「回答がありません」表示 |
| 3 | 無限スクロール | 下にスクロール | 追加の回答がロードされる |

---

## 後回しにするテスト項目

### 今日の質問データが必要

以下のテストは、DynamoDBに今日の質問を登録してから実施する。

#### タスク4-12: 回答投稿

| # | テスト内容 | 期待結果 |
|---|-----------|----------|
| 1 | 回答投稿（正常系） | 投稿成功、回答済み状態になる |
| 2 | 重複投稿エラー | 「今日はすでに回答済みです」アラート |

#### タスク4-13: タイムライン

| # | テスト内容 | 期待結果 |
|---|-----------|----------|
| 1 | タイムライン表示 | フォロー中ユーザーの回答が表示 |
| 2 | 未回答時のロック | 「回答するとみんなの回答が見れます」表示 |
| 3 | 回答なし表示 | 「まだ回答がありません」表示 |
| 4 | 遅刻表示 | 「+◯分」タグ表示 |

#### タスク4-14: リアクション

| # | テスト内容 | 期待結果 |
|---|-----------|----------|
| 1 | リアクション付与 | 絵文字が表示される |
| 2 | リアクション変更 | 絵文字が変わる |
| 3 | リアクション解除 | 「+」に戻る |

#### タスク4-15: お題提案

| # | テスト内容 | 期待結果 |
|---|-----------|----------|
| 1 | お題提案（正常系） | 「送信完了」アラート |
| 2 | 重複提案エラー | 「今日はすでにお題を提案済みです」アラート |
| 3 | 未回答時の提案不可 | 「今日の質問に回答してから」アラート |

### 複数ユーザーが必要

以下のテストは、テスト用の別ユーザーを作成してから実施する。

#### タスク4-17: 他人のプロフィール

| # | テスト内容 | 期待結果 |
|---|-----------|----------|
| 1 | 他人のプロフィール表示 | ユーザー情報が表示される |
| 2 | フォローする | 「フォロー中」に変わる |
| 3 | フォロー解除 | 「フォローする」に戻る |
| 4 | 相互フォロー表示 | 「フォロー中 ✓」表示 |
| 5 | ブロック関係の表示 | ブロック中/ブロックされている表示 |

#### タスク4-21: フォロー/フォロワー一覧からの遷移

| # | テスト内容 | 期待結果 |
|---|-----------|----------|
| 1 | ユーザーをタップ | そのユーザーのプロフィールに遷移 |
| 2 | 無限スクロール | 追加のユーザーがロードされる |

---

## テストデータ準備コマンド

### 今日の質問を追加

```bash
# テーブル名は環境に合わせて変更
DATE=$(date +%Y-%m-%d)
aws dynamodb put-item \
  --table-name Q-Questions \
  --item '{
    "PK": {"S": "QUESTION#'$DATE'"},
    "SK": {"S": "DAILY"},
    "questionId": {"S": "'$DATE'"},
    "text": {"S": "今日一番楽しかったことは？"},
    "category": {"NULL": true},
    "createdAt": {"S": "'$DATE'T00:00:00.000Z"}
  }'
```

### テスト用ユーザー作成
1. アプリから新規登録
2. メール確認
3. アプリ内ID設定
4. 必要に応じて相互フォロー

---

## 備考

- UIテストはエミュレータ/シミュレータで実施可能
- API連携テストはバックエンドのデプロイが必要
- タイムライン・リアクション系は複数ユーザー＋今日の質問の両方が必要
- エラーメッセージの文言はバックエンド実装に依存する場合あり
